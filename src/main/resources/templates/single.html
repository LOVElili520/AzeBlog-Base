<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Single Post</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <!-- Bootstrap styles -->
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">

    <!-- Font-Awesome -->
    <link rel="stylesheet" href="../static/css/font-awesome/css/font-awesome.min.css">

    <!-- Google Webfonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600|PT+Serif:400,400italic' rel='stylesheet'
          type='text/css'>

    <!-- Styles -->
    <link rel="stylesheet" href="../static/css/style.css" id="theme-styles">

    <!--[if lt IE 9]>
    <script src="../static/js/vendor/google/html5-3.6-respond-1.1.0.min.js"></script>
    <![endif]-->

    <!--后端依赖-->
    <!--导入vue 引入element需要在vue之后 -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- 引入样式element -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

</head>
<body>
<div id="app">
    <header>
        <div class="widewrapper masthead">
            <div class="container">
                <a href="index.html" id="logo">
                    <img src="../static/img/Aze.png" alt="clean Blog">
                </a>

                <div id="mobile-nav-toggle" class="pull-right">
                    <a href="#" data-toggle="collapse" data-target=".clean-nav .navbar-collapse">
                        <i class="fa fa-bars"></i>
                    </a>
                </div>

                <nav class="pull-right clean-nav">
                    <div class="collapse navbar-collapse">
                        <ul class="nav nav-pills navbar-nav">

                            <li>
                                <a href="index.html">主页</a>
                            </li>
                            <li>
                                <a href="about.html">关于我们</a>
                            </li>
                            <li>
                                <a href="contact.html">商业合作</a>
                            </li>
                            <li>
                                <a onclick="window.open('admin-home.html')">后台管理</a>
                            </li>
                        </ul>
                    </div>
                </nav>

            </div>
        </div>

        <div class="widewrapper subheader">
            <div class="container">
                <div class="clean-breadcrumb">
                    <a href="#">Blog</a>
                    <span class="separator">&#x2F;</span>
                    <a href="#">Bootstrap</a>
                    <span class="separator">&#x2F;</span>
                    <a href="#">HTML Template</a>
                </div>


                <div class="clean-searchbox">
                    <form action="#" method="get" accept-charset="utf-8">

                        <input class="searchfield" id="searchbox" type="text" placeholder="Search">
                        <button class="searchbutton" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </header>

    <div class="widewrapper main">
        <div class="container">
            <div class="row">
                <div class="col-md-8 blog-main">
                    <article class="blog-post">
                        <header>
                            <div class="lead-image">
                                <img :src="Blog.imageUrl" alt="" class="img-responsive">
                            </div>
                        </header>
                        <div class="body">
                            <h1>{{Blog.title}}</h1>
                            <div class="meta">
                                <i class="fa fa-user"></i> John Doe <i class="fa fa-calendar"></i>23 Agustus 2015<i
                                    class="fa fa-comments"></i><span class="data"><a
                                    href="#comments">3 Comments</a></span>
                            </div>
                            <!--文章内容-->
                            <dl v-html="Blog.content">
                                {{Blog.content}}
                            </dl>
                        </div>
                    </article>

                    <aside class="social-icons clearfix">
                        <h3>Share on </h3>
                        <a href="#"><i class="fa fa-facebook"></i></a> <a href="#"><i class="fa fa-twitter"></i></a> <a
                            href="#"><i class="fa fa-google"></i></a>
                    </aside>

                    <aside class="comments" id="comments">
                        <hr>

                        <h2><i class="fa fa-comments"></i> 6 Comments</h2>

                        <article class="comment">
                            <header class="clearfix">
                                <img src="../static/img/avatar.png" alt="A Smart Guy" class="avatar">
                                <div class="meta">
                                    <h3><a href="#">John Doe</a></h3>
                                    <span class="date">
                                        24 August 2015
                                    </span>
                                    <span class="separator">
                                        -
                                    </span>

                                    <a href="#create-comment" class="reply-link">Reply</a>
                                </div>
                            </header>
                            <div class="body">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere sit perspiciatis
                                debitis,
                                vel ducimus praesentium expedita, assumenda ipsum cum corrupti dolorum modi. Rem ipsam
                                similique sapiente obcaecati tenetur beatae voluptatibus.
                            </div>
                        </article>

                        <article class="comment reply">
                            <header class="clearfix">
                                <img src="../static/img/avatar.png" alt="A Smart Guy" class="avatar">
                                <div class="meta">
                                    <h3><a href="#">John Doe</a></h3>
                                    <span class="date">
                                        24 August 2015
                                    </span>
                                    <span class="separator">
                                        -
                                    </span>

                                    <a href="#create-comment" class="reply-link">Reply</a>
                                </div>
                            </header>
                            <div class="body">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere sit perspiciatis
                                debitis,
                                vel ducimus praesentium expedita, assumenda ipsum cum corrupti dolorum modi. Rem ipsam
                                similique sapiente obcaecati tenetur beatae voluptatibus.
                            </div>
                        </article>

                        <article class="comment ">
                            <header class="clearfix">
                                <img src="../static/img/avatar.png" alt="A Smart Guy" class="avatar">
                                <div class="meta">
                                    <h3><a href="#">John Doe</a></h3>
                                    <span class="date">
                                        24 August 2015
                                    </span>
                                    <span class="separator">
                                        -
                                    </span>

                                    <a href="#create-comment" class="reply-link">Reply</a>
                                </div>
                            </header>
                            <div class="body">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere sit perspiciatis
                                debitis,
                                vel ducimus praesentium expedita, assumenda ipsum cum corrupti dolorum modi. Rem ipsam
                                similique sapiente obcaecati tenetur beatae voluptatibus.
                            </div>
                        </article>

                        <article class="comment">
                            <header class="clearfix">
                                <img src="../static/img/avatar.png" alt="A Smart Guy" class="avatar">
                                <div class="meta">
                                    <h3><a href="#">John Doe</a></h3>
                                    <span class="date">
                                        24 August 2015
                                    </span>
                                    <span class="separator">
                                        -
                                    </span>

                                    <a href="#create-comment" class="reply-link">Reply</a>
                                </div>
                            </header>
                            <div class="body">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere sit perspiciatis
                                debitis,
                                vel ducimus praesentium expedita, assumenda ipsum cum corrupti dolorum modi. Rem ipsam
                                similique sapiente obcaecati tenetur beatae voluptatibus.
                            </div>
                        </article>
                    </aside>

                    <aside class="create-comment" id="create-comment">
                        <hr>

                        <h2><i class="fa fa-pencil"></i> Add Comment</h2>

                        <form action="#" method="get" accept-charset="utf-8">
                            <div class="row">
                                <div class="col-md-6">
                                    <input type="text" name="name" id="comment-name" placeholder="Your Name"
                                           class="form-control input-lg">
                                </div>
                                <div class="col-md-6">
                                    <input type="email" name="email" id="comment-email" placeholder="Email"
                                           class="form-control input-lg">
                                </div>
                            </div>

                            <input type="url" name="name" id="comment-url" placeholder="Website"
                                   class="form-control input-lg">

                            <textarea rows="10" name="message" id="comment-body" placeholder="Your Message"
                                      class="form-control input-lg"></textarea>

                            <div class="buttons clearfix">
                                <button type="submit" class="btn btn-xlarge btn-clean-one">Submit</button>
                            </div>
                        </form>
                    </aside>
                </div>

                <!--侧边栏开始-->
                <aside class="col-md-4 blog-aside">

                    <div class="aside-widget">
                        <header>
                            <h3>精选文章</h3>
                        </header>
                        <div class="body">
                            <ul class="clean-list">
                                <li v-for="item in stickBlog"><a @click="toSingle(item.id)">{{item.title}}</a></li>
                            </ul>
                        </div>
                    </div>

                    <!--Related Post  相关文章-->
                    <div class="aside-widget">
                        <header>
                            <h3>相关文章</h3>
                        </header>
                        <div class="body">
                            <ul class="clean-list">
                                <li v-for="item in blogList" @click="toSingle(item.id)"><a>{{item.title}}</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="aside-widget">
                        <header>
                            <h3>文章标签</h3>
                        </header>
                        <div class="body clearfix">
                            <ul class="tags">
                                <li v-for="item in tagList" @click="toSingle(item.tagId)"><a>{{item.tagName}}</a></li>
                            </ul>
                        </div>
                    </div>
                </aside>
                <!--侧栏结束-->
            </div>
        </div>
    </div>

    <footer>
        <div class="widewrapper footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 footer-widget">
                        <h3><i class="fa fa-user"></i>About</h3>

                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab animi laboriosam nostrum
                            consequatur
                            fugiat at, labore praesentium modi, quasi dolorum debitis reiciendis facilis, dolor saepe
                            sint
                            nemo, earum molestias quas.</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolorum, error aspernatur assumenda
                            quae eveniet.</p>
                    </div>

                    <div class="col-md-4 footer-widget">
                        <h3><i class="fa fa-pencil"></i> Recent Post</h3>
                        <ul class="clean-list">
                            <li><a href="">Clean - Responsive HTML5 Template</a></li>
                            <li><a href="">Responsive Pricing Table</a></li>
                            <li><a href="">Yellow HTML5 Template</a></li>

                        </ul>
                    </div>

                    <div class="col-md-4 footer-widget">
                        <h3><i class="fa fa-envelope"></i>Contact Me</h3>

                        <p>Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet.</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil fugiat, cupiditate veritatis
                            excepturi tempore explicabo.</p>
                        <div class="footer-widget-icon">
                            <i class="fa fa-facebook"></i><i class="fa fa-twitter"></i><i class="fa fa-google"></i>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="widewrapper copyright">
            Copyright 2015
        </div>

    </footer>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/modernizr.js"></script>


<script src="../static/js/jquery.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/modernizr.js"></script>

<script type="text/javascript">

    new Vue({
        el: '#app',
        data() {
            return {
                blogId: '',
                Blog: {
                   imageUrl:'',
                    content:""
                },
                blogList: [],
                tagList: [],
                stickBlog: []
            };
        },
        methods: {

            //获取url地址中的参数
            urlSearch() {
                var name, value;
                var str = location.href; //获取到整个地址
                var num = str.indexOf("?")
                str = str.substr(num + 1); //取得num+1后所有参数，这里的num+1是下标 str.substr(start [, length ]
                var arr = str.split("&"); //以&分割各个参数放到数组里
                for (var i = 0; i < arr.length; i++) {
                    num = arr[i].indexOf("=");
                    if (num > 0) {
                        name = arr[i].substring(0, num);
                        value = arr[i].substr(num + 1);
                        this.blogId = value;
                    }
                }
            },

            /*通过id查询，初始化页面*/
            getBlogById() {
                var that = this;
                that.urlSearch();
                $.ajax({
                    type: 'GET',
                    url: '/api/blog/getById/' + that.blogId,
                    success: function (data) {
                        that.Blog = data.data;
                    }
                });
            },

            /*查询所有博客 */
            listBlog() {
                var that = this;
                $.ajax({
                    type: 'GET',
                    url: '/api/blog/list',
                    success: function (data) {
                        that.blogList = data.data;
                        /*循环便利数据为其拼接图片路径*/
                        for (var i = 0, len = that.blogList.length; i < len; i++) {
                            that.blogList[i].imageUrl = "http://" + window.location.host + "/" + that.blogList[i].imageUrl; //获取当前索引的键值
                        }
                    }
                });
            },

            /*查询置顶博客*/
            listStickBlog(){
                var that = this;
                $.ajax({
                    type: 'GET',
                    url: '/api/blog/select-by-stick',
                    success: function(data) {
                        that.stickBlog = data.data;
                    }
                });
            },

            //查询标签
            listTag: function (){
                var that = this ;
                $.ajax({
                    type:'GET',
                    url:'/api/tag/list',
                    success:function(data) {
                        that.tagList = data.data;
                    }
                });
            },

        },

        created() {
            this.getBlogById();
            this.listTag();
            this.listStickBlog();
            this.listBlog();
        },
    })
</script>


</body>
</html>